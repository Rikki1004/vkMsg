<html lang="ru">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="https://vk.com/images/icons/favicons/fav_logo.ico?6">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="referrer" content="no-referrer" />
	<!-- <meta name="viewport" content="width=device-width, user-scalable=no" /> -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vk</title>
	<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
	<link rel="stylesheet" href="style.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>


	<div id="tokenHide" class="tokenHides" style="display:none;">
		<div class="modal_cinw">
			<input style="text-align: center;padding: 1px 3px;" id="token" type="text" value="" placeholder="token">
			<input style="display:block; margin:10px auto 2px;" onclick="show(document.querySelector('#token').value);" type="submit" value="Войти">
		</div>
	</div>

	<div id="videoCon" class="tokenHides" style="display:none;">
		<div class="modal_cinw">
			<a id="but1" onclick="document.querySelector('#videoCon').style.display = 'none'" rel="noreferrer" target="_blank" href="#"><input style="display:inline-block; margin:6px 1px 6px;" type="submit" value="Смотреть"></a>
			<a id="but2" title="в открывшемся окне скопируйте прямую ссылку и перейдите по ней, по другому никак" onclick="document.querySelector('#videoCon').style.display = 'none'" href="#" target="_blank" download="vk.json"><input style="display:inline-block; margin:6px 1px 6px;" type="submit" value="Скачать"></a>
		</div>
	</div>

	<div id="toggles" class="tokenHides" style="display:none;">
		<div class="modal_cinw">
			<div><div id="dt" class="switch-btn"></div><div style="display: inline-block;">Темная тема</div></div>
			<br>
			<div><div id="re" class="switch-btn"></div><div style="display: inline-block;">Реверс порядка сообщений</div></div>
			<br>
			<div title="Напрямую из сообщений получить ссылку на видео нельзя и нужно каждый раз для каждого видео делать запрос с токеном, а если видео ну очень много, то можно с легкостью получить блокировку токена | при включении можно будет воспроизвести видео в скачанной версии даже если токен отвалится"><div id="vi" class="switch-btn"></div><div style="display: inline-block;">Разрешать видео при скачивании</div></div>
		</div>
	</div>

	<div class="major">
		<div id="exit" style="display: none;" onclick="delTo();" class="image">
			<img style="border-radius: 50%; width: 60px;" src="">
			<div style="vertical-align: middle;height: 68px; display:none;">Нажмите чтобы выйти</div>
		</div>

		<div id="setting" style="display: block;" onclick="document.querySelector('#toggles').style.display = 'block'" class="image">
			<svg fill="none" height="30" viewBox="0 0 20 20" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M10.6 2c.98.03 1.63.58 1.96 1.6l.06.18.04.15.06.2.04.13.03.01.06-.02.1-.04.13-.06c1.16-.53 2.05-.43 2.78.36l.1.12.67.83c.6.8.58 1.63 0 2.54l-.1.15-.1.14-.12.16-.05.1-.03.04v.02l.08.05.1.06.13.07c1.13.58 1.6 1.35 1.42 2.4l-.03.16-.2.87c-.13.56-.23.82-.63 1.19-.39.35-.83.5-1.42.55h-.18l-.16.01-.2.01-.15.02.01.12.01.08.03.14c.26 1.25-.03 2.1-.97 2.62l-.14.08-.96.47c-.9.4-1.72.2-2.48-.58l-.12-.13-.11-.13-.14-.15-.08-.08-.04-.04-.07.08-.09.08-.1.11c-.78.93-1.6 1.27-2.6.88L7 17.49l-.86-.42-.26-.13c-.39-.22-.6-.42-.82-.87a2.38 2.38 0 01-.13-1.54l.03-.19.04-.2L5 14 4.93 14l-.12-.01h-.15c-1.27-.03-2.03-.51-2.33-1.55l-.04-.15-.24-1.04c-.2-.97.2-1.72 1.11-2.28l.16-.1.15-.07.17-.1.13-.08v-.02l-.05-.08-.06-.1-.09-.12c-.76-1.02-.85-1.92-.22-2.8l.1-.12.67-.83c.64-.75 1.47-.9 2.48-.52l.17.07.15.06.18.08.11.04.03-.01.03-.08.04-.11.03-.14c.3-1.17.9-1.83 1.96-1.92L9.46 2zm-.05 1.47h-1.1l-.1.01c-.24.03-.4.16-.54.68l-.04.13-.04.17c-.09.29-.22.61-.39.93a4.8 4.8 0 00-.94.46 5.28 5.28 0 01-.95-.29l-.28-.13c-.2-.08-.36-.13-.48-.14h-.07a.45.45 0 00-.33.16l-.06.06-.64.8-.08.1c-.15.21-.17.4.16.88l.18.25c.18.26.35.57.5.9-.11.32-.19.65-.23.99a5.3 5.3 0 01-.83.6l-.28.14c-.5.28-.57.46-.53.72l.01.06.23 1 .04.13c.07.25.21.39.79.41l.32.02c.3.01.65.07 1 .16.18.29.4.55.63.8.02.43-.02.85-.1 1.18-.16.78 0 .9.32 1.06l.92.45c.1.05.19.07.28.07h.05c.15-.02.32-.13.55-.4l.21-.24c.21-.23.48-.47.78-.68l.24.01h.5l.24-.02c.3.22.57.46.78.69l.21.24c.27.3.44.4.6.4h.06c.05 0 .1-.02.14-.04l.08-.03.92-.45.12-.06c.24-.14.34-.32.2-1a5.07 5.07 0 01-.1-1.18c.24-.25.45-.51.64-.8.34-.1.7-.15 1-.16l.31-.02c.67-.03.75-.2.83-.54l.22-.93c.07-.33.07-.53-.5-.85l-.29-.15a5.26 5.26 0 01-.83-.59 4.87 4.87 0 00-.22-.98c.14-.34.32-.65.49-.9l.19-.26c.33-.48.3-.67.16-.88l-.04-.06-.65-.8c-.11-.13-.2-.23-.37-.26h-.06c-.13 0-.3.04-.54.14l-.3.13c-.27.11-.6.22-.94.28-.3-.18-.61-.33-.94-.45-.16-.3-.29-.62-.37-.9l-.1-.33c-.15-.56-.32-.66-.58-.68zM10 6.9a3.11 3.11 0 110 6.23 3.11 3.11 0 010-6.23zm0 1.48a1.64 1.64 0 100 3.27 1.64 1.64 0 000-3.27z" fill="currentColor"></path></svg>
		</div>

		<div class="middle no1">
			<div class="head">
				Диалоги
			</div>
			<div class="count">-</div>
			<div class="inner"></div>
			
			<div class="posts">
				<div class="no1">
					<div class="post nom3 underMiddle" onclick="getConv(200)">
						Загрузить еще
					</div>
					<div style="background-color: black; line-height: 30px; width: 1px; margin-top: 5px;"> </div>
					<div class="post nom4 underMiddle" onclick="">
						Загрузить все
					</div>
				</div>
		</div>
	</div>
	


	<div class="middle no2">
		<div class="head">
			История сообщений
		</div>
		<div class="count">-</div>
		<div class="inner"></div>

		<div class="posts">
			<div class="no1">
				<div class="post nom1 underMiddle" style="display:flex;" onclick="">
					Загрузить еще
				</div>
				<div style="background-color: black; line-height: 30px; width: 1px; margin-top: 5px;"> </div>
				<div class="post nom1_1 underMiddle" style="display:flex;" onclick="Dwnl();">
					Скачать
				</div>
			</div>
			<div class="no2">
				<div class="post nom2 underMiddle" style="display:flex;" onclick="">
					Загрузить всё
				</div>
				<div style="background-color: black; line-height: 30px; width: 1px; margin-top: 5px;"> </div>
				<div class="post nom2_1 underMiddle" style="display:flex;" onclick="">
					Скачать всё
				</div>
			</div>
		</div>
	</div>
</div>

<style id="generalCss" type="text/css">
body{
	font-family: 'Roboto', sans-serif;
}
a{
	color:black;
}
.video{
	position: relative;
}
.video::after{
	content: '';
	transform: scale(0.35);
	position: absolute;
	top: 0; right: 0;
	bottom: 0; left: 0;

	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAF+AQMAAADOdjCVAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMA/iyWEiMAAANDSURBVHja7dy7raRAEIXhg8bAJARCmVA2FAiNUAgBE+0iarcfGnel8yPdMaqM691vZk43j+6WSrXmMOrQp15h1fYB3mHV9QHCrFWtxjBrF4iw1NmBJcy6YQQRKxnEUhvLMGJnGUacZBqVutggRNxwECIkaQhQKxvFiI2NYhvHKUAdbBpEnGwaRFwd+C2jfnVgqWEaNfSZVB2ryndvwCGrpgoM7i9oU3Dtf62qn12AW2YtBRjtDGuKewFOmTUXYLIHQe1/p6KYNT4CzPY0qBPh1GxPA2n4B5ShkF0R1xOAPRGl5Qlg8Weyyqd/BWBfS9L8BACu5gLEE4B9O5CmL/kGCSSQQAIJJJBAAgkkkEACCSSQQAIJJJBAAhIChktCwBgrA6bYGTDHKRGgnhswIFYELBE7BU4K3BSIlQI7BU4K3BSIjQI7BS4KBAY2ChwUuCgQGNgocFDgokBgYPOBPy0EHzgrcAPgXQUAjBXYfWCowOkDbSRuAMxRavWBHoIP9BB8oIcAgB6CD/QQfKCH4AM9BAD0EHzgVYHDB3oIPqB3FQAwVWDzgR6CD6gCFwBaCADoIfhAD8EHeggAaCEAoIfgAz0EH+gvfABolzQAxgqsPjC0FH1ACwVqCDsARgoMFNDy0wD+CTjEmc4DOpEGei2M9Gqs97QbAPSGgm9p+KaKb+v0wYIfbfjhih/v9AUDv+Lgl6z+rusDLQIf6O/7PoBftunrPl5w4CUPXnTRZR9eeOKlL1580+U/3oDol7IP9Ah8oF/KNoA3ovBW2DObcXg7EG9I4i1RQQBvC+ONabw1LgicFDgosEIAH9LgYyJ8UEWPyvBhHTsufNMDS3xkig9t8bHxSA+uXyEhQLckBEhKQEpASkBKQEpASkBKQEpASkBKQEpASkBKQEpASkBKQEpASkBKQErgP/VFDZbgN1gYwBttiQOBm439NIBbvnEgYNu7mQG89Z9w88GJAbx/onALSNyEErfBfIU/EcqxMm8FipuR4naovCHr4oZQfsH9RFNa3BYXN+bFrYFxc2LcHhk3aMYtonmTajARLolNhFNi47hLbBw3iQ2DxIbhlliKp8RS3CUWgsR+Q51GZCA3tXJvKi3Cv0yfOFCozvWBAAAAAElFTkSuQmCC);
	background-repeat:no-repeat;
	background-position:center;
}
.msg{
	display: flex;
	justify-content: left;
	/*margin-bottom: 2px;*/
	line-height: 19px;
}

html.dark{
	background-color: #222226;
	color: #777;
}
html.dark a{
	color: #bfbfbf !important;
}
</style>

<script id="Svideo" type="text/javascript">function Svideo(vid){
	/*$.ajax({
		type : "GET",
		dataType : "jsonp",
		url : vid,
		data : {},
		success: function(data){ window.open(data['response']['items'][0]['player']) }
		});*/
	function jsonp(url, callback) {
	    var callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());
	    window[callbackName] = function(data) {
	        delete window[callbackName];
	        document.body.removeChild(script);
	        callback(data);
	    };

	    var script = document.createElement('script');
	    script.src = url + (url.indexOf('?') >= 0 ? '&' : '?') + 'callback=' + callbackName;
	    document.body.appendChild(script);
	}

	jsonp(vid, function(data) {
	   window.open(data['response']['items'][0]['player']);
	});

	}</script> 
<!-- модифицированная функция для загрузки видео из скачанных файлов: здесь реализован JSONP (только так можно обратиться к video api), вообще этот запрос можно сделать через AJAX, но тогда нужно будет подключать Jquery-->

<script src="script.min.js"></script>
</body></html>