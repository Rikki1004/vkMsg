var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,e){a.raw=e;return a};var reverse=!1,videoD=!1;
$(".switch-btn").click(function(a){$(this).toggleClass("switch-on");$(this).hasClass("switch-on")?("vi"==a.target.id&&(videoD=!0,localStorage.setItem("vi",!0)),"dt"==a.target.id&&(document.querySelector("html").setAttribute("class","dark"),localStorage.setItem("dt",!0)),"re"==a.target.id&&(reverse=!0,document.querySelector(".middle.no2 .inner").innerHTML="",totalCount=0,document.querySelector(".middle.no2 .count").innerHTML="-",func(!1),localStorage.setItem("re",!0)),$(this).trigger("on.switch")):
("vi"==a.target.id&&(videoD=!1,localStorage.setItem("vi",!1)),"dt"==a.target.id&&(document.querySelector("html").setAttribute("class",""),localStorage.setItem("dt",!1)),"re"==a.target.id&&(reverse=!1,document.querySelector(".middle.no2 .inner").innerHTML="",totalCount=0,document.querySelector(".middle.no2 .count").innerHTML="-",func(!1),localStorage.setItem("re",!1)),$(this).trigger("off.switch"))});var tue="";
$("#exit").hover(function(){document.querySelector("#exit img").setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AQMAAAADqqSRAAAABlBMVEX6YVz7YVyTTbZfAAAAAnRSTlP4Ad3xlhsAAAG1SURBVDjLzZVNboQwDIUdzSLdcYFKbHuKcrRJb5Zdr0FvQHdZRKF+tgmMYdTtIEbiG/L7/PKg9fGi1+BC4wMT0ZEX5uHAiTns3AjXvXMRHjvPwrFzEg4bo/uHDQCuRBPGmIyLNE0yIMlwg6wpGmdpWelmnHSR0guP8gLNlJttZcGEhI6jaTAJF90JtxuFl00z9OPnORinqHwzzso5GuMFcxqMlyC8Sc0TKU/GVbjZ9Ks8nbnuJeSezKFzAhfmb4Zf5hHMq/jC6vgGL9FUuq95UJYpeLAZPIMn+fEj4U8oUZkXYygBlYQzVIqiJk+lnG5cpHXnHHAbT6ggmqwVzItGZ1STt6Jc6BNiK9+hzDtU69zoDaq1jVd1j7DIlUiNtXEWM+w8iyd2VjPtXMQjO6tHnr/3/f34fv7D+vz6r/Zn+2+X+lzot+kbTG/Tvz6rj6tfs/oKX9R/84fywT/x0V+z+av7bzA/wp8/5sdy8O944Wfv9//Ohz9Pp/Pmz6M/r9mdZ3/efR74vPB54vPG59Epr3ye+bzzeVhJ6tPz0uepz9tTHvu89nnu8/70PfDfi9P35GW+d3/1sFDyskbaewAAAABJRU5ErkJggg==")},function(){document.querySelector("#exit img").setAttribute("src",
tue)});$("#videoCon").click(function(a){$(a.target).is(".modal_cinw")||(document.querySelector("#videoCon").style.display="none")});$("#toggles").click(function(a){"tokenHides"==a.target.className&&(document.querySelector("#toggles").style.display="none")});count=200;fields="photo_50";var ids=[],token;totalCountC=0;var isMaxC=999999999,isMaxM=999999999;
function getConv(a){if(a>isMaxC)return!1;url1="https://api.vk.com/method/messages.getConversations?fields="+fields+"&count="+count+"&offset="+a+"&access_token="+token+"&v=5.81";$.ajax({type:"GET",async:!1,dataType:"jsonp",url:url1,data:{},success:function(e){for(var c=0;c<e.response.items.length;c++)ids.push(e.response.items[c].conversation),myltiId=checkArr(e.response.items[c].conversation.chat_settings)?"chat"==e.response.items[c].conversation.peer.type?
e.response.items[c].conversation.peer.id:e.response.items[c].conversation.chat_settings.owner_id:e.response.items[c].conversation.peer.id,html='<div class="block" onclick="func(this);showmsg('+myltiId+',0)" id="a'+myltiId+'"><div class="image"><img src=""></div><div class="name"></div></div>',document.querySelector(".middle.no1 .inner").insertAdjacentHTML("beforeEnd",html);var h="https://api.vk.com/method/execute?code=var%20users%20%3D%20API.users.get(%7B%22user_ids%22%3A%22",d="https://api.vk.com/method/execute?code=var%20groups%20%3D%20API.groups.getById(%7B%22group_ids%22%3A%22";
for(c=0;c<ids.length;c++)"user"==ids[c].peer.type&&(h=h+ids[c].peer.id+"%2C"),"group"==ids[c].peer.type&&(d=d+String(ids[c].peer.id).substr(1)+"%2C",String(ids[c].peer.id).substr(1)),"chat"==ids[c].peer.type&&(document.querySelector("#a"+ids[c].peer.id+" img").setAttribute("src",checkArr(ids[c].chat_settings.photo)?ids[c].chat_settings.photo.photo_50:"https://vk.com/images/icons/im_multichat_50.png"),$("#a"+ids[c].peer.id+" div.name").html(ids[c].chat_settings.title));h=h+"%22%2C%22fields%22%3A%22photo_50%2Conline%22%7D)%3B%20return%20%7B%22usersinfo%22%3Ausers%7D%3B&access_token="+
token+"&callback=GetUsersHandler&v=5.95";d=d+"%22%7D)%3B%20return%20%7B%22groupsinfo%22%3Agroups%7D%3B&access_token="+token+"&callback=GetGroupsHandler&v=5.95";$.ajax({type:"GET",async:!1,dataType:"jsonp",url:h,data:{},success:function(g){g.response.usersinfo.forEach(function(f){return document.querySelector("#a"+f.id+" img").setAttribute("src",f.photo_50)});g.response.usersinfo.forEach(function(f){return $("#a"+f.id+
" div.name").html(f.first_name+" "+f.last_name)})}});$.ajax({type:"GET",async:!1,dataType:"jsonp",url:d,data:{},success:function(g){g.response.groupsinfo.forEach(function(f){return document.querySelector("#a-"+f.id+" img").setAttribute("src",f.photo_50)});g.response.groupsinfo.forEach(function(f){return $("#a-"+f.id+" div.name").html(f.name)})}});document.querySelector(".post.nom3").setAttribute("onclick","getConv("+
(a+200)+")");document.querySelector(".post.nom4").setAttribute("onclick","getAllConv("+(a+200)+","+e.response.count+")",!1);totalCountC+=e.response.items.length;document.querySelector(".middle.no1 .count").innerHTML=totalCountC+" \u0438\u0437 "+e.response.count;isMaxC=e.response.count}})}
function func(a){document.querySelectorAll(".middle.no1 .inner .block").forEach(function(e){e.setAttribute("style","");e.setAttribute("class","block")});a&&($("html, body").animate({scrollTop:1E4},600),a.style.backgroundColor="#818181",a.style.color="#000",a.setAttribute("class","block clicked"))}
function Dwnl(){function a(){var g=String(document.querySelector("#generalCss").innerHTML),f=String(document.querySelector("#Svideo").outerHTML);gh=String(document.querySelector(".clicked").querySelector(".name").innerHTML);na=gh+".html";var k=document.createElement("a");k.setAttribute("href","data:text/plain;charset=utf-8,<html"+("true"==localStorage.getItem("dt")?' class="dark"':"")+'><head><meta charset="utf-8"><style type="text/css">'+encodeURIComponent(g)+"</style>"+encodeURIComponent(f)+"<head><body>"+
encodeURIComponent(document.querySelector(".middle.no2 .inner").innerHTML)+"</body></html>");k.setAttribute("download",na);k.style.display="none";document.body.appendChild(k);k.click();document.body.removeChild(k)}function e(){var g=document.querySelectorAll(".videoA");d=g.length;if(0===d)return a(),0;h=0;var f=Promise.resolve();g.forEach(function(k){return f=f.then(function(){return c(k)})})}function c(g){var f=g.getAttribute("onclick");return-1!==f.indexOf("window.open")?(h++,h==d&&a(),0):$.ajax({type:"GET",
async:!1,dataType:"jsonp",url:f.slice(8,-2),data:{},success:function(k){g.setAttribute("onclick","window.open('"+k.response.items[0].player+"')");h++;h==d&&a()}})}var h,d;videoD?e():a()}function sleep(a){var e=Date.now();do var c=Date.now();while(c-e<a)}
function showAllmsg(a,e,c,h){function d(k,m){f=0;g(k,m)}function g(k,m){f+=1;if(5<f)alert("too many attempts.");else{if(m>isMaxM)return h&&Dwnl(),"full";url2="https://api.vk.com/method/messages.getHistory?peer_id="+k+"&offset="+m+"&count=200&access_token="+token+"&v=5.95";$.ajax({type:"GET",dataType:"jsonp",async:!1,url:url2,data:{},error:function(l){g(k,m)},success:function(l){if(checkArr(l.error))return console.log("err"),
g(k,m),0;document.querySelector(".post.nom1").setAttribute("style","display:flex;");document.querySelector(".post.nom2").setAttribute("style","display:flex;");document.querySelector(".post.nom1").setAttribute("onclick","showmsg("+k+","+m+")");document.querySelector(".post.nom2_1").setAttribute("onclick","showAllmsg("+k+","+m+","+l.response.count+",true)");document.querySelector(".post.nom2").setAttribute("onclick","showAllmsg("+k+","+m+","+l.response.count+",false)");totalCount+=l.response.items.length;
document.querySelector(".middle.no2 .count").innerHTML=totalCount+" \u0438\u0437 "+l.response.count;isMaxM=l.response.count;addmsg(l.response.items,0);m+=200;l=m-200;l+=200;l<c?console.log(d(k,l)):h&&Dwnl()}})}}var f;d(a,e)}function delTo(){localStorage.removeItem("to");location.reload()}function getAllConv(a,e,c){for(;a<e;a+=200)getConv(a),sleep(3E3);c&&Dwnl()}
function Svideo(a){document.querySelector("#videoCon").setAttribute("style","display:block;");$.ajax({type:"GET",async:!1,dataType:"jsonp",url:a,data:{},success:function(e){document.querySelector("#but1").setAttribute("href",e.response.items[0].player);document.querySelector("#but2").setAttribute("href",a)}})}function checkArr(a){b=!1;"undefined"!=typeof a&&0!==a.length&&(b=!0);return b}
function addmsg(a,e){for(var c=0;c<a.length;c++){data1=1E3*a[c].date;for(var h="",d=0;d<e;d++)h+='<div style="width:3px;margin-left:1px;margin-right:3px;background-color:#7598B7;"> </div>';html='<div class="msg fwd'+e+'" id="a'+a[c].id+'">'+h+'<div class="body">['+(new Date(data1)).toLocaleDateString("en-GB").replace("/",":").replace("/",":")+" \u0432 "+(new Date(data1)).toLocaleTimeString("en-GB",{hour12:!1,hour:"numeric",minute:"numeric"})+"] "+(-1==String(a[c].from_id).indexOf("-")?"<a style='color:black' target='_blank' href='https://vk.com/id"+
a[c].from_id+"'>"+(a[c].from_id==id?"\u0412\u044b":a[c].from_id)+"</a>":a[c].from_id)+" : "+(""!=a[c].text?a[c].reply_message?a[c].text+" [\u043e\u0442\u0432\u0435\u0442]":a[c].text:void 0!==a[c].action?"["+a[c].action.type+" -> <a href=https://vk.com/id"+a[c].action.member_id+">"+a[c].action.member_id+"<a/>]":a[c].attachments!==[]?"":"\u0441\u0441\u044b\u043b\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: ")+"</div></div>";var g=reverse?"afterBegin":
"beforeEnd";document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html);a[c].reply_message&&addmsg([a[c].reply_message],e+1);a[c].fwd_messages&&addmsg(a[c].fwd_messages.reverse(),e+1);if(a[c].attachments!==[])for(d=0;d<a[c].attachments.length;d++){if("photo"==a[c].attachments[d].type){for(var f=temp=0;f<a[c].attachments[d].photo.sizes.length;f++)temp<a[c].attachments[d].photo.sizes[f].height&&(temp=a[c].attachments[d].photo.sizes[f].height);for(f=0;f<a[c].attachments[d].photo.sizes.length;f++)if(temp==
a[c].attachments[d].photo.sizes[f].height)var k=a[c].attachments[d].photo.sizes[f].url;html='<div class="msg attachments photoA">'+h+'<div style="width:300px;"><a target="_blank" href="'+k+'"><img style="width:100%;margin-left:0px;" src="'+k+'"></a></div>';document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html)}"graffiti"==a[c].attachments[d].type&&(k=a[c].attachments[d].graffiti.url,html='<div class="msg attachments">'+h+'<div style="width:300px;"><img style="width:100%;margin-left:0px;" src="'+
k+'"></div>',document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"gift"==a[c].attachments[d].type&&(giftUrl=a[c].attachments[d].gift.thumb_256,html='<div class="msg attachments">'+h+'<div style="width:300px;"><img style="width:100%;margin-left:0px;" src="'+giftUrl+'"></div>',document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"sticker"==a[c].attachments[d].type&&(giftUrl=a[c].attachments[d].sticker.images[a[c].attachments[d].sticker.images.length-1].url,html=
'<div class="msg attachments">'+h+'<div style="width:300px;"><img style="width:100%;margin-left:0px;" src="'+giftUrl+'"></div>',document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"doc"==a[c].attachments[d].type&&(docUrl=a[c].attachments[d].doc.url,html='<div class="msg attachments">'+h+'<div class="body">[\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442] <a href="'+docUrl+'">'+a[c].attachments[d].doc.title+"</a></div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,
html));"link"==a[c].attachments[d].type&&(docUrl=a[c].attachments[d].link.url,html='<div class="msg attachments">'+h+'<div class="body">[link] <a target="_blank" href="'+docUrl+'">'+a[c].attachments[d].link.title+"</a></div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"wall"==a[c].attachments[d].type&&(docUrl="https://vk.com/wall"+a[c].attachments[d].wall.from_id+"_"+a[c].attachments[d].wall.id,html='<div class="msg attachments">'+h+'<div class="body">[\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0435] <a target="_blank" href="'+
docUrl+'">'+docUrl+"</a></div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"poll"==a[c].attachments[d].type&&(docUrl="https://vk.com/poll"+a[c].attachments[d].poll.author_id+"_"+a[c].attachments[d].poll.id,html='<div class="msg attachments">'+h+'<div class="body">[\u041e\u043f\u0440\u043e\u0441] <a target="_blank" href="'+docUrl+'">'+a[c].attachments[d].poll.question+"</a></div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"audio"==a[c].attachments[d].type&&
(html='<div class="msg attachments">'+h+'<div class="body">[\u041c\u0443\u0437\u044b\u043a\u0430] '+a[c].attachments[d].audio.artist+" - "+a[c].attachments[d].audio.title+"</div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"call"==a[c].attachments[d].type&&(html='<div class="msg attachments">'+h+'<div class="body">[\u0417\u0432\u043e\u043d\u043e\u043a] '+(a[c].attachments[d].call.video?"\u041f\u043e \u0432\u0438\u0434\u0435\u043e":"\u041f\u043e \u0430\u0443\u0434\u0438\u043e")+
(checkArr(a[c].attachments[d].call.duration)?", \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0434\u043b\u0438\u043b\u0441\u044f "+a[c].attachments[d].call.duration+" \u0441\u0435\u043a\u0443\u043d\u0434":", \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u044b\u043b \u043e\u0442\u043c\u0435\u043d\u0435\u043d")+"</div>",document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"audio_message"==a[c].attachments[d].type&&(oggUrl=a[c].attachments[d].audio_message.link_ogg,
html='<div class="msg fwd'+e+' attachments">'+h+'<div style="width:300px;"><source src="'+oggUrl+'" type="audio/ogg;"><audio controls="" src="'+oggUrl+'"></audio></div>',document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html));"video"==a[c].attachments[d].type&&(Object.keys(a[c].attachments[d].video).forEach(function(m){var l=0;m.includes("photo")&&(l<m.substr(6)&&(l=m.substr(6)),img1Url=this["photo_"+l])},a[c].attachments[d].video),videoUrl0="`https://api.vk.com/method/video.get?videos="+
a[c].attachments[d].video.owner_id+"_"+a[c].attachments[d].video.id+"_"+a[c].attachments[d].video.access_key+"&access_token="+token+"&v=5.81`",html='<div onclick="Svideo('+videoUrl0+')" class="msg attachments videoA">'+h+'<div style="width:300px;" class="video"><img style="width:100%;margin-left:0px;" src="'+img1Url+'"></div>',document.querySelector(".middle.no2 .inner").insertAdjacentHTML(g,html))}}e=0;reverse&&setTimeout(function(){return document.querySelector(".middle.no2 .inner").scrollTop=document.querySelector(".middle.no2 .inner").scrollHeight},
2E3)}
function showmsg(a,e){if(e>isMaxM)return"full";url2="https://api.vk.com/method/messages.getHistory?peer_id="+a+"&offset="+e+"&count=200&access_token="+token+"&v=5.95";$.ajax({type:"GET",dataType:"jsonp",async:!1,url:url2,data:{},success:function(c){if(checkArr(c.error))return console.log("err"),"err";document.querySelector(".post.nom1").setAttribute("style","display:flex;");document.querySelector(".post.nom2").setAttribute("style","display:flex;");
document.querySelector(".post.nom1").setAttribute("onclick","showmsg("+a+","+e+")");document.querySelector(".post.nom2_1").setAttribute("onclick","showAllmsg("+a+","+e+","+c.response.count+",true)");document.querySelector(".post.nom2").setAttribute("onclick","showAllmsg("+a+","+e+","+c.response.count+",false)");200>=e&&(document.querySelector(".middle.no2 .inner").innerHTML="",totalCount=0);totalCount+=c.response.items.length;document.querySelector(".middle.no2 .count").innerHTML=totalCount+" \u0438\u0437 "+
c.response.count;isMaxM=c.response.count;addmsg(c.response.items,0)}});e+=200}
function show(a){token=a.split("access_token=").pop().split("&expires_in=").shift();document.querySelector("#token").value=token;ids100="https://api.vk.com/method/users.get?fields=photo_100&access_token="+token+"&v=5.95&callback=GetUserInfoHandler";$.ajax({type:"GET",async:!1,dataType:"jsonp",url:ids100,data:{},error:function(e){alert("\u0431\u0435\u0434\u044b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c");localStorage.removeItem("to");document.querySelector("#tokenHide").setAttribute("style",
"display:block;")},success:function(e){checkArr(e.error)?(alert("\u0431\u0435\u0434\u044b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c"),localStorage.removeItem("to"),document.querySelector("#tokenHide").setAttribute("style","display:block;")):(id=e.response[0].id,localStorage.setItem("to",token),tue=e.response[0].photo_100,document.querySelector("#exit").setAttribute("style","display:block;"),document.querySelector("#exit img").setAttribute("src",
e.response[0].photo_100),document.querySelector("#tokenHide").setAttribute("style","display:none;"),getConv(0))}})}var t=localStorage.getItem("to");null!==t?show(t):document.querySelector("#tokenHide").setAttribute("style","display:block;");t=localStorage.getItem("dt");null!==t&&"true"==t&&$("#dt").click();t=localStorage.getItem("re");null!==t&&"true"==t&&$("#re").click();t=localStorage.getItem("vi");null!==t&&"true"==t&&$("#vi").click();document.querySelector(".middle.no1").scrollIntoView();